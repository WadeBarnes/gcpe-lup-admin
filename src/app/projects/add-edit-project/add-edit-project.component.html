<nav *ngIf="!loading" class="action-container" aria-label="breadcrumb">
  <div *ngIf="!isEditing">
    <ol class="breadcrumb">
      <li class="breadcrumb-item" aria-current="page">
        <a [routerLink]="['/projects']">All Projects</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        Add
      </li>
    </ol>
  </div>
  <div *ngIf="isEditing">
    <ol class="breadcrumb">
      <li class="breadcrumb-item" aria-current="page">
        <a [routerLink]="['/projects']">All Projects</a>
      </li>
      <li class="breadcrumb-item" aria-current="page">
        <a [routerLink]="['/p', project._id]">{{project.name}}</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        Edit
      </li>
    </ol>
  </div>
</nav>

<main class="container-fluid-padding add-edit-form">
  <div class="spinner-container" *ngIf="loading">
    <div class="spinner-new rotating"></div>
  </div>
  <form [formGroup]="myForm" (ngSubmit)="register(myForm)" novalidate>
    <div class="text-right">
      <button class="btn btn-primary" type="cancel" (click)="onCancel()">Cancel</button>
      &nbsp;
      <button class="btn btn-primary" type="submit" (click)="onSubmit()">Save</button>
    </div>
    <section>
      <h2>Basic Information</h2>
      <div class="flex-container">
        <div class="label-pair">
          <label for="name">Project Name* </label>
          <input name="name" id="name" formControlName="name" type="text" class="form-control" />
        </div>
        <div class="label-pair">
          <label for="partner">Partner First Nation(s)* </label>
          <input name="partner" id="partner" formControlName="partner" type="text" class="form-control" />
        </div>
        <!--<div class="label-pair add-row">
          <label for="proponent">Proponent*</label>
          <div *ngIf="proponentName === '' || proponentName == null">
            <button class="btn btn-primary" type="button" (click)="linkOrganization()">Link Organization</button>
          </div>
          <div *ngIf="proponentName !== '' && proponentName">
            <span class="cell icon">
              <i class="material-icons">business</i>
            </span>
            &nbsp;
            <span class="cell name" [title]="proponentName || ''">
              <span class="cell__txt-content">{{proponentName}}</span>
            </span>
            <span class="cell actions">
              <button class="btn btn-icon" type="button" title="Delete this organization"
                (click)="removeSelectedOrganization()">
                <i class="material-icons">delete</i>
              </button>
            </span>
          </div>
        </div>-->
        <div class="label-pair med">
          <label for="agreements">Agreements </label>
          <input name="agreements" id="agreements" formControlName="agreements" type="text" class="form-control" />
        </div>
        <div class="label-pair med">
          <label for="description">Description* </label>
          <textarea name="description" id="description" formControlName="description" class="form-control"></textarea>
        </div>
      </div>
    </section>
    <section>
      <h2>Location</h2>
      <div class="flex-container">
        <div class="label-pair">
          <label for="region">Region* </label>
          <select required class="form-control" formControlName="region">
            <option *ngFor="let region of REGIONS" [ngValue]="region">{{region}}</option>
          </select>
        </div><div class="label-pair med">
          <label for="overlappingRegionalDistricts">Overlapping Regional Districts* </label>
          <select name="overlappingRegionalDistricts" id="overlappingRegionalDistricts"
            formControlName="overlappingRegionalDistricts" class="form-control">
            <option *ngFor="let overlappingRegionalDistricts of OVERLAPPING_REGIONAL_DISTRICTS"
              [ngValue]="overlappingRegionalDistricts">{{overlappingRegionalDistricts}}</option>
            </select>
        </div>
        <div class="label-pair sm">
          <label for="lat">Lat* </label>
          <input name="lat" id="lat" formControlName="lat" type="text" class="form-control" />
        </div>
        <div class="label-pair sm">
          <label for="lon">Long* </label>
          <input name="lon" id="lon" formControlName="lon" type="text" class="form-control" />
        </div>
        <!-- <div class="label-pair file">
          <label for="addFile">Add Shape File </label>
          <div class="input-group">
            <i class="material-icons" role="presentation">attach_file</i>
            <input name="addFile" id="addFile" formControlName="addFile" type="file" class="form-control" />
          </div>
        </div> -->
      </div>
    </section>
    <section>
      <h2>Supplementary Information</h2>
      <div class="flex-container">
        <div class="label-pair">
          <label for="existingLandUsePlans">Existing Land Use Plans </label>
          <input name="existingLandUsePlans" id="existingLandUsePlans" formControlName="existingLandUsePlans"
            type="text" class="form-control" />
        </div>
        <div class="label-pair med">
          <label for="existingLandUsePlanURLs">Existing Land Use Plan URLs </label>
          <input name="existingLandUsePlanURLs" id="existingLandUsePlanURLs" formControlName="existingLandUsePlanURLs" type="text" class="form-control" />
        </div>
      </div>
    </section>
    <section>
      <h2>Overall Project Status</h2>
      <div class="flex-container">
        <fieldset class="form-group">
          <div class="label-pair">
            <label for="projectPhase">Project Phase </label>
            <select name="projectPhase" id="projectPhase" formControlName="projectPhase" class="form-control">
              <option *ngFor="let projectPhase of PROJECT_PHASES" [ngValue]="projectPhase">{{projectPhase}}</option>
            </select>
          </div>
        </fieldset>
        <fieldset class="form-group">
          <div class="label-pair">
            <label for="engagementStatus">Engagement Status </label>
            <select class="form-control" name="engagementStatus" id="engagementStatus" formControlName="engagementStatus">
              <option *ngFor="let engagementStatus of ENGAGEMENT_STATUSES" [ngValue]="engagementStatus">{{engagementStatus}}</option>
            </select>
          </div>
        </fieldset>
      </div>
    </section>
    <section>
      <h2>Background Information</h2>
      <div class="flex-container">
        <div class="add-row med">
          <ckeditor name="backgroundInfo" id="backgroundInfo" formControlName="backgroundInfo" [editor]="Editor" [data]="project?.backgroundInfo"></ckeditor>
        </div>
      </div>
    </section>
    <section class="people">
      <h2>People</h2>
      <div class="flex-container">
        <div class="label-pair add-row">
          <label for="projectDirector">Project Director</label>
          <!--<input name="projectLead" id="projectLead" formControlName="projectLead" type="text"
                      class="form-control"/>-->
          <div *ngIf="projectDirector === '' || projectDirector == null">
            <button class="add-btn" type="button" (click)="contactSelect('projectDirector')"><i class="material-icons"
                role="add">add_box</i></button>
          </div>
          <div *ngIf="projectDirector !== '' && projectDirector">
            <span class="cell icon">
              <i class="material-icons">person</i>
            </span>
            &nbsp;
            <span class="cell name" [title]="projectDirector || ''">
              <span class="cell__txt-content">{{projectDirector}}</span>
            </span>
            <span class="cell actions">
              <button class="btn btn-icon" type="button" title="Delete this contact" (click)="removeSelectedContact('projectDirector')">
                <i class="material-icons">delete</i>
              </button>
            </span>
          </div>
        </div>
        <div class="label-pair add-row">
          <label for="projectLead">Project Lead</label>
          <!--<input name="projectLead" id="projectLead" formControlName="projectLead" type="text"
            class="form-control"/>-->
          <div *ngIf="projectLead === '' || projectLead == null">
            <button class="add-btn" type="button" (click)="contactSelect('projectLead')"><i class="material-icons"
                role="add">add_box</i></button>
          </div>
          <div *ngIf="projectLead !== '' && projectLead">
            <span class="cell icon">
              <i class="material-icons">person</i>
            </span>
            &nbsp;
            <span class="cell name" [title]="projectLead || ''">
              <span class="cell__txt-content">{{projectLead}}</span>
            </span>
            <span class="cell actions">
              <button class="btn btn-icon" type="button" title="Delete this contact" (click)="removeSelectedContact('projectLead')">
                <i class="material-icons">delete</i>
              </button>
            </span>
          </div>
        </div>
      </div>
    </section>
  </form>
</main>